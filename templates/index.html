{% extends "base.html" %}

{% block title %}CloudBurst Predict - AI-Powered Cloudburst Prediction for Uttarakhand{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8 mx-auto">
                <h1 class="display-4 fw-bold mb-4">
                    <i class="fas fa-cloud-rain text-warning me-3"></i>
                    Predict Cloudbursts with 97% Accuracy
                </h1>
                <p class="lead mb-5">
                    AI-powered cloudburst prediction system specifically designed for Uttarakhand. 
                    Get real-time weather analysis and early warnings to protect lives and property.
                </p>
                
                <div class="row text-center mb-5">
                    <div class="col-md-4">
                        <div class="card-custom p-4">
                            <h3 class="text-primary">{{ "{:,}".format(stats.total_predictions) if stats and stats.total_predictions else "0" }}</h3>
                            <p class="mb-0">Predictions Made</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card-custom p-4">
                            <h3 class="text-success">97.35%</h3>
                            <p class="mb-0">6-Hour Accuracy</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card-custom p-4">
                            <h3 class="text-info">98.23%</h3>
                            <p class="mb-0">12-Hour Accuracy</p>
                        </div>
                    </div>
                </div>
                
                <div class="d-flex justify-content-center gap-3">
                    {% if not current_user.is_authenticated %}
                        <a href="{{ url_for('register') }}" class="btn btn-warning btn-lg btn-custom">
                            <i class="fas fa-rocket me-2"></i>Get Started Free
                        </a>
                        <a href="{{ url_for('pricing') }}" class="btn btn-outline-light btn-lg btn-custom">
                            <i class="fas fa-tags me-2"></i>View Pricing
                        </a>
                    {% else %}
                        <a href="{{ url_for('dashboard') }}" class="btn btn-warning btn-lg btn-custom">
                            <i class="fas fa-tachometer-alt me-2"></i>Go to Dashboard
                        </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Live Demo Section -->
<section class="py-5">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <div class="card-custom p-5">
                    <h2 class="text-center mb-4">
                        <i class="fas fa-bolt text-warning me-2"></i>Try Live Prediction
                    </h2>
                    
                    <div class="row">
                        <div class="col-md-8 mx-auto">
                            <div class="mb-3">
                                <label for="locationSelect" class="form-label">Select Location:</label>
                                <select class="form-select" id="locationSelect">
                                    <option value="Dehradun, Uttarakhand">Dehradun</option>
                                    <option value="Nainital, Uttarakhand">Nainital</option>
                                    <option value="Haridwar, Uttarakhand">Haridwar</option>
                                    <option value="Rishikesh, Uttarakhand">Rishikesh</option>
                                    <option value="Tehri, Uttarakhand">Tehri</option>
                                    <option value="Chamoli, Uttarakhand">Chamoli</option>
                                    <option value="Pithoragarh, Uttarakhand">Pithoragarh</option>
                                </select>
                            </div>
                            
                            <div class="text-center">
                                <button class="btn btn-primary btn-lg btn-custom" onclick="makePrediction()">
                                    <i class="fas fa-search me-2"></i>Get Prediction
                                </button>
                            </div>
                            
                            <div id="predictionResult" class="mt-4" style="display: none;">
                                <div class="alert alert-info">
                                    <h5><i class="fas fa-map-marker-alt me-2"></i><span id="resultLocation"></span></h5>
                                    <div class="row mt-3">
                                        <div class="col-md-6">
                                            <h6>6-Hour Prediction:</h6>
                                            <div class="d-flex align-items-center">
                                                <div class="progress flex-grow-1 me-3" style="height: 25px;">
                                                    <div id="progress6h" class="progress-bar" style="width: 0%"></div>
                                                </div>
                                                <span id="percentage6h" class="fw-bold"></span>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <h6>12-Hour Prediction:</h6>
                                            <div class="d-flex align-items-center">
                                                <div class="progress flex-grow-1 me-3" style="height: 25px;">
                                                    <div id="progress12h" class="progress-bar" style="width: 0%"></div>
                                                </div>
                                                <span id="percentage12h" class="fw-bold"></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="text-center mt-3">
                                        <h4 id="riskLevel" class="mb-0"></h4>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="text-center mt-3">
                                <small class="text-muted">
                                    <i class="fas fa-info-circle me-1"></i>
                                    Demo uses simulated data. Register for real-time predictions.
                                </small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold text-white">Why Choose CloudBurst Predict?</h2>
            <p class="lead text-light">Advanced AI technology meets local weather expertise</p>
        </div>
        
        <div class="row">
            <div class="col-md-4">
                <div class="feature-card text-center">
                    <div class="mb-3">
                        <i class="fas fa-brain fa-3x text-primary"></i>
                    </div>
                    <h4>AI-Powered</h4>
                    <p>Deep learning models trained on years of Uttarakhand weather data with 97%+ accuracy</p>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="feature-card text-center">
                    <div class="mb-3">
                        <i class="fas fa-clock fa-3x text-success"></i>
                    </div>
                    <h4>Real-Time</h4>
                    <p>Get instant predictions for 6-hour and 12-hour time horizons with live weather data</p>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="feature-card text-center">
                    <div class="mb-3">
                        <i class="fas fa-map-marked-alt fa-3x text-warning"></i>
                    </div>
                    <h4>Location-Specific</h4>
                    <p>Tailored for Uttarakhand's unique geography - from valleys to high-altitude regions</p>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="feature-card text-center">
                    <div class="mb-3">
                        <i class="fas fa-shield-alt fa-3x text-info"></i>
                    </div>
                    <h4>Reliable</h4>
                    <p>Enterprise-grade infrastructure with 99.9% uptime and robust API endpoints</p>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="feature-card text-center">
                    <div class="mb-3">
                        <i class="fas fa-code fa-3x text-secondary"></i>
                    </div>
                    <h4>Developer-Friendly</h4>
                    <p>Simple REST API with comprehensive documentation and multiple programming language support</p>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="feature-card text-center">
                    <div class="mb-3">
                        <i class="fas fa-users fa-3x text-danger"></i>
                    </div>
                    <h4>Community</h4>
                    <p>Join thousands of developers, researchers, and organizations using our platform</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- API Parade Section -->
<section class="py-5">
    <div class="container">
        <div class="row">
            <div class="col-lg-10 mx-auto">
                <div class="card-custom p-5">
                    <h2 class="text-center mb-4">
                        <i class="fas fa-code text-primary me-2"></i>Simple API Integration
                    </h2>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <h5>Request:</h5>
                            <pre class="bg-dark text-light p-3 rounded"><code>curl -X POST "https://api.cloudburstpredict.com/api/predict" \
  -H "X-API-Key: YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "location": "Nainital, Uttarakhand"
  }'</code></pre>
                        </div>
                        
                        <div class="col-md-6">
                            <h5>Response:</h5>
                            <pre class="bg-dark text-light p-3 rounded"><code>{
  "location": "Nainital, Uttarakhand",
  "predictions": {
    "6_hour": {
      "probability": 0.85,
      "percentage": "85.0%"
    },
    "12_hour": {
      "probability": 0.72,
      "percentage": "72.0%"
    }
  },
  "risk_level": "HIGH",
  "timestamp": "2024-07-04T14:30:00Z"
}</code></pre>
                        </div>
                    </div>
                    
                    <div class="text-center mt-4">
                        <a href="{{ url_for('pricing') }}" class="btn btn-primary btn-lg btn-custom">
                            <i class="fas fa-rocket me-2"></i>Get Started Today
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="py-5 text-center">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <h2 class="display-5 fw-bold text-white mb-4">Ready to Get Started?</h2>
                <p class="lead text-light mb-5">
                    Join thousands of users already using our API for weather prediction and disaster management.
                </p>
                
                {% if not current_user.is_authenticated %}
                    <a href="{{ url_for('register') }}" class="btn btn-warning btn-lg btn-custom me-3">
                        <i class="fas fa-rocket-2"></i>Start Free Trial
                    </a>
                    <a href="{{ url_for('pricing') }}" class="btn btn-outline-light btn-lg btn-custom">
                        <i class="fas fa-tags me-2"></i>View Pricing
                    </a>
                {% else %}
                    <a href="{{ url_for('dashboard') }}" class="btn btn-warning btn-lg btn-custom">
                        <i class="fas fa-tachometer-alt me-2"></i>Go to Dashboard
                    </a>
                {% endif %}
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
function makePrediction() {
    const location = document.getElementById('locationSelect').value;
    const resultDiv = document.getElementById('predictionResult');
    const button = event.target;
    
    // Show loading state
    button.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Predicting...';
    button.disabled = true;
    
    // Simulate API call with random data for demo
    setTimeout(() => {
        // Generate demo data
        const pred6h = Math.random() * 0.6 + 0.2; // 20-80%
        const pred12h = Math.random() * 0.6 + 0.2; // 20-80%
        const maxRisk = Math.max(pred6h, pred12h);
        
        let riskLevel, riskClass, progressClass;
        if (maxRisk >= 0.7) {
            riskLevel = "HIGH RISK";
            riskClass = "risk-high";
            progressClass = "bg-danger";
        } else if (maxRisk >= 0.5) {
            riskLevel = "MODERATE RISK";
            riskClass = "risk-moderate";
            progressClass = "bg-warning";
        } else {
            riskLevel = "LOW RISK";
            riskClass = "risk-low";
            progressClass = "bg-success";
        }
        
        // Update UI
        document.getElementById('resultLocation').textContent = location;
        document.getElementById('percentage6h').textContent = (pred6h * 100).toFixed(1) + '%';
        document.getElementById('percentage12h').textContent = (pred12h * 100).toFixed(1) + '%';
        document.getElementById('riskLevel').textContent = riskLevel;
        document.getElementById('riskLevel').className = 'mb-0 ' + riskClass;
        
        // Update progress bars
        const progress6h = document.getElementById('progress6h');
        const progress12h = document.getElementById('progress12h');
        progress6h.style.width = (pred6h * 100) + '%';
        progress12h.style.width = (pred12h * 100) + '%';
        progress6h.className = 'progress-bar ' + progressClass;
        progress12h.className = 'progress-bar ' + progressClass;
        
        // Show result
        resultDiv.style.display = 'block';
        
        // Reset button
        button.innerHTML = '<i class="fas fa-search me-2"></i>Get Prediction';
        button.disabled = false;
        
        // Scroll to result
        resultDiv.scrollIntoView({ behavior: 'smooth' });
    }, 2000);
}
</script>
{% endblock %}